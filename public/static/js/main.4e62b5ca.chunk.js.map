{"version":3,"sources":["components/BookCard.js","components/Books.js","components/LikeCard.js","components/Likes.js","components/LoggedInApp.js","components/LoginForm.js","components/SignupForm.js","components/LoggedOutApp.js","App.js","index.js"],"names":["BookCard","book","setLikes","likes","currentUser","onDelete","src","img_url","alt","title","author","Button","onClick","id","newPost","user_id","book_id","rating","config","method","headers","Accept","body","JSON","stringify","fetch","then","r","json","data","onLikeClick","Books","books","map","LikeCard","onDeleteLike","useState","formData","setFormData","onSubmit","e","preventDefault","console","log","htmlFor","type","name","value","onChange","target","handleChange","Likes","LoggedInApp","setCurrentUser","setBooks","useEffect","username","filteredLikes","filter","LoginForm","email","password","configObj","resp","ok","user","errors","error","to","SignupForm","LoggedOutApp","exact","path","element","App","authenticated","setAuthenticated","credentials","res","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4e62b5ca.chunk.js","sourcesContent":["import Button from \"@material-ui/core/Button\";\n\nfunction BookCard({ book, setLikes, likes, onDelete, currentUser }) {\n  function onLikeClick(id) {\n    const newPost = {\n      user_id: currentUser.id,\n      book_id: book.id,\n      rating: 10,\n      // author: book.author,\n      // title: book.title,\n      // rating: book.rating\n      // img_url: book.img_url,\n    };\n\n    let config = {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(newPost),\n    };\n\n    fetch(\"/user_books\", config)\n      .then((r) => r.json())\n      .then((data) => setLikes([...likes, data]));\n  }\n\n  return (\n    <div>\n      <img src={book.img_url} alt=\"book\"></img>\n      <h3>{book.title}</h3>\n      <h3>{book.author}</h3>\n      <Button onClick={() => onLikeClick(book.id)}>Add to Likes</Button>\n    </div>\n  );\n}\nexport default BookCard;\n","import BookCard from \"./BookCard\";\n\nfunction Books({ books, setLikes, likes, onDelete, currentUser }) {\n  return (\n    <div>\n      <h3>Books to Like </h3>\n      <div>\n        {books.map((book) => {\n          return (\n            <BookCard\n              book={book}\n              setLikes={setLikes}\n              likes={likes}\n              onDelete={onDelete}\n              currentUser={currentUser}\n            />\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nexport default Books;\n","import { useState } from \"react\";\nimport { Button } from \"@material-ui/core\";\n\nfunction LikeCard({ book, onDeleteLike, setLikes }) {\n  const [formData, setFormData] = useState({\n    rating: \"\",\n  });\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = (e) => {\n    const config = {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(formData),\n    };\n    e.preventDefault();\n    fetch(`/user_books/${book.id}`, config)\n      .then((r) => r.json())\n      .then((data) => console.log(data));\n    fetch(\"/user_books\")\n      .then((r) => r.json())\n      .then(setLikes);\n  };\n  return (\n    <div>\n      <img src={book.book.img_url} alt=\"book\"></img>\n      <h3>{book.book.author}</h3>\n      <h3>{book.book.title}</h3>\n      <h3>Rating: {book.rating}</h3>\n      <form onSubmit={handleSubmit}>\n        <label htmlFor=\"rating\">Rating</label>\n        <input\n          type=\"text\"\n          name=\"rating\"\n          value={formData.rating}\n          onChange={(e) => handleChange(e)}\n        />\n        <button type=\"submit\">Submit Rating</button>\n      </form>\n      <Button onClick={() => onDeleteLike(book.id)}>Delete</Button>\n    </div>\n  );\n}\n\nexport default LikeCard;\n","import LikeCard from \"./LikeCard\";\n\nfunction Likes({ likes, onDeleteLike, setLikes }) {\n  return (\n    <div>\n      <h3>Liked Books</h3>\n      <div>\n        {likes.map((book) => {\n          return (\n            <div key={book.id}>\n              <LikeCard\n                book={book}\n                setLikes={setLikes}\n                onDeleteLike={onDeleteLike}\n              />\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nexport default Likes;\n","import React, { useState, useEffect } from \"react\";\nimport Books from \"./Books\";\nimport Likes from \"./Likes\";\nfunction LoggedInApp({ setCurrentUser, currentUser }) {\n  const handleLogout = () => {\n    setCurrentUser(null);\n    fetch(\"/logout\", { method: \"DELETE\" });\n  };\n\n  const [books, setBooks] = useState([]);\n  const [likes, setLikes] = useState([]);\n\n  useEffect(() => {\n    fetch(\"/books\")\n      .then((r) => r.json())\n      .then(setBooks);\n  }, []);\n\n  useEffect(() => {\n    fetch(\"/user_books\")\n      .then((r) => r.json())\n      .then(setLikes);\n  }, []);\n\n  function onDeleteLike(id) {\n    fetch(`/user_books/${id}`, {\n      method: \"DELETE\",\n    });\n    const filteredLikes = likes.filter((book) => book.id !== id);\n    setLikes(filteredLikes);\n  }\n\n  return (\n    <div>\n      Welcome {currentUser.username}!\n      <p>\n        <button onClick={handleLogout}>Logout</button>\n      </p>\n      <Books\n        books={books}\n        setLikes={setLikes}\n        likes={likes}\n        currentUser={currentUser}\n      />\n      <Likes likes={likes} setLikes={setLikes} onDeleteLike={onDeleteLike} />\n    </div>\n  );\n}\n\nexport default LoggedInApp;\n","import React, { useState } from \"react\";\nimport { Redirect, Link } from \"react-router-dom\";\n\nfunction LoginForm({ setCurrentUser }) {\n  const [formData, setFormData] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n  });\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = (e) => {\n    const configObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(formData),\n    };\n    e.preventDefault();\n    fetch(\"/login\", configObj).then((resp) => {\n      if (resp.ok) {\n        resp.json().then((user) => {\n          setCurrentUser(user);\n        });\n      } else {\n        resp.json().then((errors) => {\n          console.error(errors);\n        });\n      }\n    });\n  };\n  return (\n    <div>\n      <form onSubmit={handleSubmit}>\n        <h1>Log In</h1>\n        <p>\n          <label htmlFor=\"username\">Username </label>\n          <input\n            type=\"text\"\n            name=\"username\"\n            value={formData.username}\n            onChange={(e) => handleChange(e)}\n          />\n        </p>\n        <p>\n          <label htmlFor=\"password\">Password </label>\n          <input\n            type=\"password\"\n            name=\"password\"\n            value={formData.password}\n            onChange={(e) => handleChange(e)}\n          />\n        </p>\n        <p>\n          <button type=\"submit\">Log In</button>\n        </p>\n        <p>Don't have an account?</p>\n        <p>\n          <Link to=\"/signup\">Sign Up</Link>\n        </p>\n      </form>\n    </div>\n  );\n}\n\nexport default LoginForm;\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction SignupForm({ setCurrentUser }) {\n  const [formData, setFormData] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n  });\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const configObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(formData),\n    };\n\n    fetch(\"/signup\", configObj).then((resp) => {\n      if (resp.ok) {\n        resp.json().then((user) => {\n          console.log(user);\n          setCurrentUser(user);\n        });\n      } else {\n        resp.json().then((errors) => {\n          console.error(errors);\n        });\n      }\n    });\n  };\n  return (\n    <div>\n      <form onSubmit={handleSubmit}>\n        <h1>Sign Up</h1>\n        <p>\n          <label htmlFor=\"username\">Username </label>\n          <input\n            type=\"text\"\n            name=\"username\"\n            value={formData.username}\n            onChange={(e) => handleChange(e)}\n          />\n        </p>\n        <p>\n          <label htmlFor=\"email\">Email </label>\n          <input\n            type=\"text\"\n            name=\"email\"\n            value={formData.email}\n            onChange={(e) => handleChange(e)}\n          />\n        </p>\n        <p>\n          <label htmlFor=\"password\">Password </label>\n          <input\n            type=\"password\"\n            name=\"password\"\n            value={formData.password}\n            onChange={(e) => handleChange(e)}\n          />\n        </p>\n        <p>\n          <button type=\"submit\">Sign Up</button>\n        </p>\n        <p>Have an account?</p>\n        <p>\n          <Link to=\"/\">Log In</Link>\n        </p>\n      </form>\n    </div>\n  );\n}\n\nexport default SignupForm;\n","import React from \"react\";\nimport { Routes, Route, Navigate } from \"react-router-dom\";\n\nimport LoginForm from \"./LoginForm\";\nimport SignupForm from \"./SignupForm\";\n\nfunction LoggedOutApp({ setCurrentUser }) {\n  return (\n    <div>\n      <Routes>\n        <Route\n          exact\n          path=\"/\"\n          element={<LoginForm setCurrentUser={setCurrentUser} />}\n        />\n\n        <Route\n          exact\n          path=\"/signup\"\n          element={<SignupForm setCurrentUser={setCurrentUser} />}\n        />\n      </Routes>\n    </div>\n  );\n}\n\nexport default LoggedOutApp;\n","import React, { useState, useEffect } from \"react\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport LoggedInApp from \"./components/LoggedInApp\";\nimport LoggedOutApp from \"./components/LoggedOutApp\";\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [authenticated, setAuthenticated] = useState(false);\n  console.log(currentUser);\n  useEffect(() => {\n    fetch(\"/me\", {\n      credentials: \"include\",\n    }).then((res) => {\n      if (res.ok) {\n        res.json().then((user) => {\n          setCurrentUser(user);\n          setAuthenticated(true);\n        });\n      } else {\n        setAuthenticated(true);\n      }\n    });\n  }, []);\n\n  if (!authenticated) {\n    return <div></div>;\n  }\n  return (\n    <div>\n      <h1>Books App</h1>\n\n      <Router>\n        {currentUser ? (\n          <LoggedInApp\n            setCurrentUser={setCurrentUser}\n            currentUser={currentUser}\n          />\n        ) : (\n          <LoggedOutApp setCurrentUser={setCurrentUser} />\n        )}\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}